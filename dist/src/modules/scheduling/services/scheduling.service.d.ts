import { Prisma } from '@prisma/client';
import { DatabaseService } from '../../auth/services/database.service';
import { NotificationService } from '../../notifications/services/notification.service';
import { BookAppointmentDto, CreateExceptionDto, CreateScheduleTemplateDto, CreateTimeSlotDto, UpdateAppointmentDto, UpdateScheduleTemplateDto, UpdateTimeSlotDto } from '../dto/scheduling.dto';
import { AppointmentManagementService } from './appointment-management.service';
import { DoctorAvailabilityService } from './doctor-availability.service';
import { SlotEngineService } from './slot-engine.service';
export declare class SchedulingService {
    private db;
    doctorAvailability: DoctorAvailabilityService;
    slotEngine: SlotEngineService;
    appointmentManagement: AppointmentManagementService;
    private notificationService;
    constructor(db: DatabaseService, doctorAvailability: DoctorAvailabilityService, slotEngine: SlotEngineService, appointmentManagement: AppointmentManagementService, notificationService: NotificationService);
    createScheduleTemplate(doctorId: string, templateData: CreateScheduleTemplateDto): Promise<{
        success: boolean;
        data: {
            timeSlots: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                serviceType: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string;
                slotDuration: number;
                bufferTime: number;
                maxBookings: number;
                location: string | null;
                dayOfWeek: import(".prisma/client").$Enums.DayOfWeek;
                bufferBefore: number;
                bufferAfter: number;
                allowOverlap: boolean;
            }[];
        } & {
            id: string;
            isActive: boolean;
            createdAt: Date;
            updatedAt: Date;
            name: string;
            doctorId: string;
            description: string | null;
            timezone: string | null;
            location: Prisma.JsonValue | null;
            isDefault: boolean;
            isPublished: boolean;
            createdBy: string | null;
            minBookingNotice: number | null;
            maxAdvanceBookingDays: number | null;
            appointmentTypes: Prisma.JsonValue | null;
            applicationRules: Prisma.JsonValue | null;
            daysOfWeek: string[];
            breaks: Prisma.JsonValue | null;
        };
        message: string;
    }>;
    getScheduleTemplates(doctorId: string): Promise<{
        success: boolean;
        data: ({
            timeSlots: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                serviceType: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string;
                slotDuration: number;
                bufferTime: number;
                maxBookings: number;
                location: string | null;
                dayOfWeek: import(".prisma/client").$Enums.DayOfWeek;
                bufferBefore: number;
                bufferAfter: number;
                allowOverlap: boolean;
            }[];
        } & {
            id: string;
            isActive: boolean;
            createdAt: Date;
            updatedAt: Date;
            name: string;
            doctorId: string;
            description: string | null;
            timezone: string | null;
            location: Prisma.JsonValue | null;
            isDefault: boolean;
            isPublished: boolean;
            createdBy: string | null;
            minBookingNotice: number | null;
            maxAdvanceBookingDays: number | null;
            appointmentTypes: Prisma.JsonValue | null;
            applicationRules: Prisma.JsonValue | null;
            daysOfWeek: string[];
            breaks: Prisma.JsonValue | null;
        })[];
        message: string;
    }>;
    updateScheduleTemplate(templateId: string, updateData: UpdateScheduleTemplateDto): Promise<{
        success: boolean;
        data: {
            timeSlots: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                serviceType: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string;
                slotDuration: number;
                bufferTime: number;
                maxBookings: number;
                location: string | null;
                dayOfWeek: import(".prisma/client").$Enums.DayOfWeek;
                bufferBefore: number;
                bufferAfter: number;
                allowOverlap: boolean;
            }[];
        } & {
            id: string;
            isActive: boolean;
            createdAt: Date;
            updatedAt: Date;
            name: string;
            doctorId: string;
            description: string | null;
            timezone: string | null;
            location: Prisma.JsonValue | null;
            isDefault: boolean;
            isPublished: boolean;
            createdBy: string | null;
            minBookingNotice: number | null;
            maxAdvanceBookingDays: number | null;
            appointmentTypes: Prisma.JsonValue | null;
            applicationRules: Prisma.JsonValue | null;
            daysOfWeek: string[];
            breaks: Prisma.JsonValue | null;
        };
        message: string;
    }>;
    deleteScheduleTemplate(templateId: string): Promise<{
        success: boolean;
        message: string;
    }>;
    createTimeSlot(templateId: string, slotData: CreateTimeSlotDto): Promise<{
        success: boolean;
        data: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            serviceType: string | null;
            startTime: string;
            endTime: string;
            isAvailable: boolean;
            templateId: string;
            slotDuration: number;
            bufferTime: number;
            maxBookings: number;
            location: string | null;
            dayOfWeek: import(".prisma/client").$Enums.DayOfWeek;
            bufferBefore: number;
            bufferAfter: number;
            allowOverlap: boolean;
        };
        message: string;
    }>;
    updateTimeSlot(slotId: string, updateData: UpdateTimeSlotDto): Promise<{
        success: boolean;
        data: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            serviceType: string | null;
            startTime: string;
            endTime: string;
            isAvailable: boolean;
            templateId: string;
            slotDuration: number;
            bufferTime: number;
            maxBookings: number;
            location: string | null;
            dayOfWeek: import(".prisma/client").$Enums.DayOfWeek;
            bufferBefore: number;
            bufferAfter: number;
            allowOverlap: boolean;
        };
        message: string;
    }>;
    deleteTimeSlot(slotId: string): Promise<{
        success: boolean;
        message: string;
    }>;
    generateSchedule(doctorId: string, templateId: string, date: string): Promise<{
        success: boolean;
        data: {
            schedule: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                doctorId: string;
                date: Date;
                serviceType: string | null;
                notes: string | null;
                profileId: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string | null;
                slotDuration: number;
                bufferTime: number;
                timezone: string | null;
                maxBookings: number;
                currentBookings: number;
                location: string | null;
                meta: Prisma.JsonValue | null;
            };
            slots: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                doctorId: string;
                date: Date;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                timezone: string | null;
                currentBookings: number;
                scheduleId: string | null;
                timeSlotId: string | null;
                isBooked: boolean;
                slotCapacity: number;
                slotMetadata: Prisma.JsonValue | null;
            }[];
        };
        message: string;
    }>;
    private addMinutes;
    private shiftTime;
    private timeLessThanOrEqual;
    private getDayOfWeek;
    private generateTimeSlotsFromTemplate;
    getAvailability(doctorId: string, date: string): Promise<{
        success: boolean;
        data: {
            isAvailable: boolean;
            date: string;
            template?: undefined;
            timeSlots?: undefined;
            schedule?: undefined;
        };
        message: string;
    } | {
        success: boolean;
        data: {
            isAvailable: boolean;
            template: {
                id: string;
                isActive: boolean;
                createdAt: Date;
                updatedAt: Date;
                name: string;
                doctorId: string;
                description: string | null;
                timezone: string | null;
                location: Prisma.JsonValue | null;
                isDefault: boolean;
                isPublished: boolean;
                createdBy: string | null;
                minBookingNotice: number | null;
                maxAdvanceBookingDays: number | null;
                appointmentTypes: Prisma.JsonValue | null;
                applicationRules: Prisma.JsonValue | null;
                daysOfWeek: string[];
                breaks: Prisma.JsonValue | null;
            };
            timeSlots: any[];
            schedule: {
                template: {
                    id: string;
                    isActive: boolean;
                    createdAt: Date;
                    updatedAt: Date;
                    name: string;
                    doctorId: string;
                    description: string | null;
                    timezone: string | null;
                    location: Prisma.JsonValue | null;
                    isDefault: boolean;
                    isPublished: boolean;
                    createdBy: string | null;
                    minBookingNotice: number | null;
                    maxAdvanceBookingDays: number | null;
                    appointmentTypes: Prisma.JsonValue | null;
                    applicationRules: Prisma.JsonValue | null;
                    daysOfWeek: string[];
                    breaks: Prisma.JsonValue | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                doctorId: string;
                date: Date;
                serviceType: string | null;
                notes: string | null;
                profileId: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string | null;
                slotDuration: number;
                bufferTime: number;
                timezone: string | null;
                maxBookings: number;
                currentBookings: number;
                location: string | null;
                meta: Prisma.JsonValue | null;
            };
            date?: undefined;
        };
        message: string;
    }>;
    private generateTimeSlotsForSchedule;
    updateAvailability(doctorId: string, date: string, timeSlots: any[]): Promise<{
        success: boolean;
        data: {
            schedule: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                doctorId: string;
                date: Date;
                serviceType: string | null;
                notes: string | null;
                profileId: string | null;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                templateId: string | null;
                slotDuration: number;
                bufferTime: number;
                timezone: string | null;
                maxBookings: number;
                currentBookings: number;
                location: string | null;
                meta: Prisma.JsonValue | null;
            };
            timeSlots: {
                id: string;
                startTime: string;
                endTime: string;
                isAvailable: boolean;
                isBooked: boolean;
            }[];
        };
        message: string;
    }>;
    createException(doctorId: string, exceptionData: CreateExceptionDto): Promise<{
        success: boolean;
        data: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            date: Date;
            startTime: string | null;
            endTime: string | null;
            reason: string | null;
            type: import(".prisma/client").$Enums.ExceptionType;
            scheduleId: string | null;
            timeSlotId: string | null;
            isAllDay: boolean;
            isRecurring: boolean;
            recurringPattern: string | null;
        };
        message: string;
    }>;
    getExceptions(doctorId: string, startDate?: string, endDate?: string): Promise<{
        success: boolean;
        data: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            date: Date;
            startTime: string | null;
            endTime: string | null;
            reason: string | null;
            type: import(".prisma/client").$Enums.ExceptionType;
            scheduleId: string | null;
            timeSlotId: string | null;
            isAllDay: boolean;
            isRecurring: boolean;
            recurringPattern: string | null;
        }[];
        message: string;
    }>;
    deleteException(exceptionId: string): Promise<{
        success: boolean;
        message: string;
    }>;
    bookAppointment(appointmentData: BookAppointmentDto): Promise<{
        success: boolean;
        data: {
            patient: {
                role: import(".prisma/client").$Enums.UserRole;
                id: string;
                email: string;
                password: string;
                firstName: string;
                lastName: string;
                isActive: boolean;
                isVerified: boolean;
                isLocked: boolean;
                lockedUntil: Date | null;
                avatar: string | null;
                phoneNumber: string | null;
                dateOfBirth: Date | null;
                gender: import(".prisma/client").$Enums.Gender | null;
                address: string | null;
                city: string | null;
                state: string | null;
                zipCode: string | null;
                country: string;
                department: string | null;
                specialization: string | null;
                licenseNumber: string | null;
                npiNumber: string | null;
                lastLoginAt: Date | null;
                lastPasswordChange: Date;
                passwordResetToken: string | null;
                passwordResetExpires: Date | null;
                createdAt: Date;
                updatedAt: Date;
            };
        } & {
            prescription: string | null;
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            serviceType: string | null;
            status: import(".prisma/client").$Enums.AppointmentStatus;
            reasonForVisit: string | null;
            notes: string | null;
            patientId: string;
            appointmentDate: Date;
            duration: number;
            startTime: string;
            endTime: string;
            followUpDate: Date | null;
            type: import(".prisma/client").$Enums.AppointmentType;
            location: string | null;
            scheduleId: string | null;
            isRecurring: boolean;
            recurringPattern: string | null;
            serviceId: string | null;
            symptoms: string | null;
            diagnosis: string | null;
            insuranceId: string | null;
            paymentStatus: import(".prisma/client").$Enums.PaymentStatus;
            bookingRequestedAt: Date;
            confirmedAt: Date | null;
            cancelledAt: Date | null;
            cancelledBy: string | null;
            cancellationReason: string | null;
            requiresConfirmation: boolean;
            confirmationSent: boolean;
            parentAppointmentId: string | null;
        };
        message: string;
    }>;
    getAppointments(doctorId: string, startDate?: string, endDate?: string, status?: string, limit?: number): Promise<{
        success: boolean;
        data: ({
            patient: {
                id: string;
                email: string;
                firstName: string;
                lastName: string;
                phoneNumber: string;
            };
            doctor: {
                id: string;
                email: string;
                firstName: string;
                lastName: string;
            };
        } & {
            prescription: string | null;
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            serviceType: string | null;
            status: import(".prisma/client").$Enums.AppointmentStatus;
            reasonForVisit: string | null;
            notes: string | null;
            patientId: string;
            appointmentDate: Date;
            duration: number;
            startTime: string;
            endTime: string;
            followUpDate: Date | null;
            type: import(".prisma/client").$Enums.AppointmentType;
            location: string | null;
            scheduleId: string | null;
            isRecurring: boolean;
            recurringPattern: string | null;
            serviceId: string | null;
            symptoms: string | null;
            diagnosis: string | null;
            insuranceId: string | null;
            paymentStatus: import(".prisma/client").$Enums.PaymentStatus;
            bookingRequestedAt: Date;
            confirmedAt: Date | null;
            cancelledAt: Date | null;
            cancelledBy: string | null;
            cancellationReason: string | null;
            requiresConfirmation: boolean;
            confirmationSent: boolean;
            parentAppointmentId: string | null;
        })[];
        message: string;
    }>;
    updateAppointment(appointmentId: string, updateData: UpdateAppointmentDto): Promise<{
        success: boolean;
        data: {
            patient: {
                role: import(".prisma/client").$Enums.UserRole;
                id: string;
                email: string;
                password: string;
                firstName: string;
                lastName: string;
                isActive: boolean;
                isVerified: boolean;
                isLocked: boolean;
                lockedUntil: Date | null;
                avatar: string | null;
                phoneNumber: string | null;
                dateOfBirth: Date | null;
                gender: import(".prisma/client").$Enums.Gender | null;
                address: string | null;
                city: string | null;
                state: string | null;
                zipCode: string | null;
                country: string;
                department: string | null;
                specialization: string | null;
                licenseNumber: string | null;
                npiNumber: string | null;
                lastLoginAt: Date | null;
                lastPasswordChange: Date;
                passwordResetToken: string | null;
                passwordResetExpires: Date | null;
                createdAt: Date;
                updatedAt: Date;
            };
            doctor: {
                role: import(".prisma/client").$Enums.UserRole;
                id: string;
                email: string;
                password: string;
                firstName: string;
                lastName: string;
                isActive: boolean;
                isVerified: boolean;
                isLocked: boolean;
                lockedUntil: Date | null;
                avatar: string | null;
                phoneNumber: string | null;
                dateOfBirth: Date | null;
                gender: import(".prisma/client").$Enums.Gender | null;
                address: string | null;
                city: string | null;
                state: string | null;
                zipCode: string | null;
                country: string;
                department: string | null;
                specialization: string | null;
                licenseNumber: string | null;
                npiNumber: string | null;
                lastLoginAt: Date | null;
                lastPasswordChange: Date;
                passwordResetToken: string | null;
                passwordResetExpires: Date | null;
                createdAt: Date;
                updatedAt: Date;
            };
        } & {
            prescription: string | null;
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            serviceType: string | null;
            status: import(".prisma/client").$Enums.AppointmentStatus;
            reasonForVisit: string | null;
            notes: string | null;
            patientId: string;
            appointmentDate: Date;
            duration: number;
            startTime: string;
            endTime: string;
            followUpDate: Date | null;
            type: import(".prisma/client").$Enums.AppointmentType;
            location: string | null;
            scheduleId: string | null;
            isRecurring: boolean;
            recurringPattern: string | null;
            serviceId: string | null;
            symptoms: string | null;
            diagnosis: string | null;
            insuranceId: string | null;
            paymentStatus: import(".prisma/client").$Enums.PaymentStatus;
            bookingRequestedAt: Date;
            confirmedAt: Date | null;
            cancelledAt: Date | null;
            cancelledBy: string | null;
            cancellationReason: string | null;
            requiresConfirmation: boolean;
            confirmationSent: boolean;
            parentAppointmentId: string | null;
        };
        message: string;
    }>;
    cancelAppointment(appointmentId: string): Promise<{
        success: boolean;
        data: {
            prescription: string | null;
            id: string;
            createdAt: Date;
            updatedAt: Date;
            doctorId: string;
            serviceType: string | null;
            status: import(".prisma/client").$Enums.AppointmentStatus;
            reasonForVisit: string | null;
            notes: string | null;
            patientId: string;
            appointmentDate: Date;
            duration: number;
            startTime: string;
            endTime: string;
            followUpDate: Date | null;
            type: import(".prisma/client").$Enums.AppointmentType;
            location: string | null;
            scheduleId: string | null;
            isRecurring: boolean;
            recurringPattern: string | null;
            serviceId: string | null;
            symptoms: string | null;
            diagnosis: string | null;
            insuranceId: string | null;
            paymentStatus: import(".prisma/client").$Enums.PaymentStatus;
            bookingRequestedAt: Date;
            confirmedAt: Date | null;
            cancelledAt: Date | null;
            cancelledBy: string | null;
            cancellationReason: string | null;
            requiresConfirmation: boolean;
            confirmationSent: boolean;
            parentAppointmentId: string | null;
        };
        message: string;
    }>;
}
